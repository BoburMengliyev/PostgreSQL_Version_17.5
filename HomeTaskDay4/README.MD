# HomeTaskDay4

## ðŸ“¦ mix_tj Database (PostgreSQL 17.5)

## ðŸ“‹ Maqsad:

Ushbu loyiha PostgreSQL yoki boshqa SQL bazalarida mashq qilish uchun moâ€˜ljallangan SQL soâ€˜rovlar toâ€˜plamini oâ€˜z ichiga oladi. Maqsad â€” maâ€™lumotlar bazasini boshqarish va maâ€™lumotlarni soâ€˜rash (query) boâ€˜yicha koâ€˜nikmalarni mustahkamlash.

## ðŸ—ƒï¸ 1. Baza va jadvallar yaratish

### Baza yaratish:

```sql
CREATE DATABASE mix_tj;
```

## ðŸ“‹ Jadvallar:

- categories â€” Video toifalari

- videos â€” Videolar

- users â€” Foydalanuvchilar

- comments â€” Foydalanuvchi fikrlari

- ratings â€” Videoga baholar

- favorites â€” Foydalanuvchining yoqtirgan videolari

## ðŸ“Œ Qoâ€˜shimcha talablar:

1. username maydoni uzunligi 100 belgigacha boâ€˜lishi kerak.

2. ratings jadvalidagi rating ustunida quyidagi cheklov bo'lishi lozim: CHECK (rating BETWEEN 1 AND 5).

3. videos jadvalidagi status ustuni video holatini bildiradi: "Ñ‡ÐµÑ€Ð½Ð¾Ð²Ð¸Ðº" yoki "Ð¾Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ¾Ð²Ð°Ð½Ð¾".

4. duration ustuni video davomiyligini soniyalar bilan saqlaydi.

5. users oâ€˜chirilganda, unga tegishli barcha videolar, kommentlar, baholar va favorites yozuvlari avtomatik oâ€˜chiriladi.

6. videos oâ€˜chirilganda, unga tegishli barcha kommentlar va baholar avtomatik oâ€˜chiriladi.

## ðŸ“š SQL topshiriqlar roâ€˜yxati:

1. Barcha noyob kategoriya nomlarini koâ€˜rsatish.

```sql
SELECT DISTINCT name FROM categories;
```

2. Kategoriyalarni nomi boâ€˜yicha saralab koâ€˜rsatish.

```sql
SELECT * FROM categories ORDER BY name;
```

3. 5 ta yozuvni, birinchi 5 tasini oâ€˜tkazib, chiqarish.

```sql
SELECT * FROM categories ORDER BY id OFFSET 5 LIMIT 5;
```

4. description boâ€˜sh yoki NULL boâ€˜lgan kategoriyalar.

```sql
SELECT * FROM categories WHERE description IS NULL OR description = '';
```

5. name = 'Music', 'Sport', 'News' boâ€˜lgan yozuvlar.

```sql
SELECT * FROM categories WHERE name IN ('Music', 'Sport', 'News');
```

6. views 100 va 1000 orasidagi videolar.

```sql
SELECT * FROM videos WHERE views BETWEEN 100 AND 1000;
```

7. status = 'Ñ‡ÐµÑ€Ð½Ð¾Ð²Ð¸Ðº' yoki 'Ð¾Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ¾Ð²Ð°Ð½Ð¾' boâ€˜lgan videolar.

```sql
SELECT * FROM videos WHERE status IN ('Ð¾Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ¾Ð²Ð°Ð½Ð¾', 'Ñ‡ÐµÑ€Ð½Ð¾Ð²Ð¸Ðº');
```

8. Eng soâ€˜nggi roâ€˜yxatdan oâ€˜tgan foydalanuvchini topish.

```sql
SELECT * FROM users ORDER BY created_at DESC LIMIT 1;
```

9. Maâ€™lum postga tegishli eng soâ€˜nggi 5 komment.

```sql
SELECT * FROM comments WHERE video_id = ? ORDER BY posted_at DESC LIMIT 5;
```

10. videos jadvalidagi umumiy video soni.

```sql
SELECT COUNT(*) AS total_videos FROM videos;
```

11. users jadvalidagi foydalanuvchilar soni.

```sql
SELECT COUNT(*) AS total_users FROM users;
```

12. views ustuni boâ€˜yicha umumiy koâ€˜rishlar soni.

```sql
SELECT SUM(views) AS total_views FROM videos;
```

13. Oâ€˜rtacha rating qiymati.

```sql
SELECT AVG(rating) AS average_rating FROM ratings;
```

14. views boâ€˜yicha minimal va maksimal qiymat.

```sql
SELECT MIN(views) AS min_views, MAX(views) AS max_views FROM videos;
```

15. Eng koâ€˜p koâ€˜rilgan 5 ta nashr etilgan video.

```sql
SELECT * FROM videos WHERE status = 'Ð¾Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ¾Ð²Ð°Ð½Ð¾' ORDER BY views DESC LIMIT 5;
```

16. views > 1000 boâ€˜lgan videolardan keyingi 5 ta yozuv.

```sql
SELECT * FROM videos WHERE views > 1000 ORDER BY views DESC OFFSET 5 LIMIT 5;
```

17. Videolarni nom boâ€˜yicha alifbo tartibida chiqarish.

```sql
SELECT * FROM videos ORDER BY title ASC LIMIT 10;
```

18. Eng koâ€˜p koâ€˜rilgan 10 ta video.

```sql
SELECT * FROM videos ORDER BY views DESC LIMIT 10;
```

19. Eng kam koâ€˜rilgan bitta video.

```sql
SELECT * FROM videos ORDER BY views ASC LIMIT 1;
```

20. status = 'Ñ‡ÐµÑ€Ð½Ð¾Ð²Ð¸Ðº' boâ€˜lgan videolar soni.

```sql
SELECT COUNT(*) AS draft_count FROM videos WHERE status = 'Ñ‡ÐµÑ€Ð½Ð¾Ð²Ð¸Ðº';
```

21. Videolarning oâ€˜rtacha davomiyligi (soniyalar).

```sql
SELECT AVG(duration) AS avg_duration FROM videos;
```

22. Videolarning umumiy davomiyligi.

```sql
SELECT SUM(duration) AS total_duration FROM videos;
```

23. Eng uzun 3 ta komment (content boâ€˜yicha).

```sql
SELECT * FROM comments ORDER BY LENGTH(content) DESC LIMIT 3;
```

24. Eng qisqa 5 ta komment.

```sql
SELECT * FROM comments ORDER BY LENGTH(content) ASC LIMIT 5;
```

25. @gmail.com domenli foydalanuvchilar soni.

```sql
SELECT COUNT(*) AS gmail_users FROM users WHERE email LIKE '%@gmail.com';
```

26. ratings jadvalida 5 bahosi nechta marta ishlatilganini hisoblash.

```sql
SELECT COUNT(*) AS rating_5_count FROM ratings WHERE rating = 5;
```
